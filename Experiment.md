# Scaling # of kernels with fixed cores

## Benchmark 2: FFT -> Data motion

### (2 physical cores, 1 way of LLC, 10% of memory bandwidth)
Command: 2 emulated kernels, using iterations = 2000    
`sudo rdtset -t 'mba=10;l3=0x01;cpu=0,2' -c 0,2  python3 kernel_dm_pair.py 2 1` 

Output:  
```
emu-kernel-0, exec:247.3621985912323, overhead:1.270350456237793
emu-kernel-1, exec:250.91286897659302, overhead:1.3088340759277344
dm-0, exec:252.56781935691833, overhead:0.7920560836791992
dm-1, exec:255.70704102516174, overhead:0.9631872177124023
total_req_latency:256.9787974357605
per_req_latency:0.12848939871788026
```  

Command: 16 emulated kernels, using iterations = 100 (2000 takes way too long)
`sudo rdtset -t 'mba=10;l3=0x01;cpu=0,2' -c 0,2  python3 kernel_dm_pair.py 16 1`  

Output:  
```
dm-0, exec:107.05716586112976, overhead:1.404510498046875
dm-1, exec:95.8406081199646, overhead:2.080946683883667
dm-2, exec:107.86825776100159, overhead:1.9502606391906738
dm-3, exec:107.08786869049072, overhead:2.523134708404541
dm-4, exec:95.52839851379395, overhead:2.3031675815582275
dm-5, exec:94.90773844718933, overhead:1.1233940124511719
dm-6, exec:93.92409753799438, overhead:1.4188406467437744
dm-7, exec:105.49315643310547, overhead:1.3948867321014404
dm-8, exec:93.05642652511597, overhead:1.9791474342346191
dm-9, exec:103.01248979568481, overhead:1.6069891452789307
dm-10, exec:92.24903178215027, overhead:1.4546608924865723
dm-11, exec:101.76079225540161, overhead:1.198901653289795
dm-12, exec:102.93484568595886, overhead:1.2988667488098145
dm-13, exec:102.10804462432861, overhead:1.7789275646209717
dm-14, exec:100.44714593887329, overhead:1.2508091926574707
dm-15, exec:89.32428407669067, overhead:1.3476765155792236

total_req_latency:110.00892353057861
per_req_latency:1.100089235305786
``` 

### (4 physical cores, 2 way of LLC, 20% of memory bandwidth)
Command: 2 emulated kernels, using iterations = 2000  
`sudo rdtset -t 'mba=20;l3=0x03;cpu=0,2,4,8' -c 0,2,4,8  python3 kernel_dm_pair.py 2 1`  

Output:  
```
emu-kernel-0, exec:126.61259865760803, overhead:0.6124169826507568
emu-kernel-1, exec:126.61578679084778, overhead:0.6072268486022949
dm-0, exec:129.858167886734, overhead:0.5336132049560547
dm-1, exec:129.81128668785095, overhead:0.5773806571960449
total_req_latency:130.40885162353516
per_req_latency:0.06520442581176758
```  

Command: 16 emulated kernels, using iterations = 200 (2000 takes way too long)  
`sudo rdtset -t 'mba=20;l3=0x03;cpu=0,2,4,8' -c 0,2,4,8  python3 kernel_dm_pair.py 16 1`

Output:  
```
emu-kernel-6, exec:50.085514545440674, overhead:2.1536178588867188
emu-kernel-5, exec:49.74447679519653, overhead:3.0378289222717285
emu-kernel-15, exec:48.747506618499756, overhead:0.9055061340332031
emu-kernel-2, exec:56.101224184036255, overhead:2.369804859161377
emu-kernel-10, exec:55.658735036849976, overhead:1.3616688251495361
emu-kernel-14, exec:54.470155477523804, overhead:1.125899314880371
emu-kernel-0, exec:56.868621826171875, overhead:2.6041665077209473
emu-kernel-3, exec:57.37876319885254, overhead:2.227670907974243
emu-kernel-7, exec:56.157177686691284, overhead:2.7545151710510254
emu-kernel-9, exec:55.83353137969971, overhead:2.1896989345550537
emu-kernel-11, exec:55.55817437171936, overhead:2.067033290863037
dm-6, exec:61.87232327461243, overhead:1.4590892791748047
dm-5, exec:62.3819522857666, overhead:1.415116310119629
dm-15, exec:59.60280728340149, overhead:0.7548520565032959
emu-kernel-4, exec:61.28878116607666, overhead:3.194516658782959
emu-kernel-8, exec:60.562304735183716, overhead:2.6900105476379395
emu-kernel-13, exec:60.060946464538574, overhead:1.5464951992034912
emu-kernel-1, exec:62.5701801776886, overhead:2.9006500244140625
emu-kernel-12, exec:60.71347784996033, overhead:1.6298854351043701
dm-4, exec:69.72437906265259, overhead:1.3629987239837646
dm-8, exec:68.37745594978333, overhead:1.3069822788238525
dm-2, exec:69.7980408668518, overhead:1.5226030349731445
dm-3, exec:70.49052000045776, overhead:1.3470308780670166
dm-10, exec:68.48258972167969, overhead:1.1355221271514893
dm-9, exec:68.82978653907776, overhead:1.0350148677825928
dm-14, exec:67.28349995613098, overhead:1.3318626880645752
dm-7, exec:69.89034819602966, overhead:0.9804599285125732
dm-0, exec:71.40984272956848, overhead:0.623302698135376
dm-11, exec:68.53489685058594, overhead:1.138730525970459
dm-13, exec:68.95339512825012, overhead:0.6754255294799805
dm-1, exec:72.14022827148438, overhead:0.875216007232666
dm-12, exec:69.65041613578796, overhead:0.8629255294799805
total_req_latency:73.0529191493988
per_req_latency:0.365264595746994
```

### (8 physical cores, 4 way of LLC, 40% of memory bandwidth)
Command: 16 emulated kernels, using iterations = 4000 
`sudo rdtset -t 'mba=40;l3=0x0f;cpu=0,2,4,8,10,12,14,16' -c 0,2,4,8,10,12,14,16  python3 kernel_dm_pair.py 2 1`  

Output:  
```
emu-kernel-1, exec:119.75076484680176, overhead:0.34166979789733887
emu-kernel-0, exec:119.74889898300171, overhead:0.34822511672973633
dm-1, exec:121.1743574142456, overhead:0.3212549686431885
dm-0, exec:121.20704936981201, overhead:0.2927107810974121
total_req_latency:121.51649308204651
per_req_latency:0.030379123270511628
```


Command: 16 emulated kernels, using iterations = 400 (2000 takes way too long)  
`sudo rdtset -t 'mba=40;l3=0x0f;cpu=0,2,4,8,10,12,14,16' -c 0,2,4,8,10,12,14,16  python3 kernel_dm_pair.py 16 1`

Output:  
```
emu-kernel-12, exec:71.71570706367493, overhead:0.7860362529754639
emu-kernel-4, exec:72.79175686836243, overhead:1.8241689205169678
emu-kernel-14, exec:73.04060101509094, overhead:0.6215364933013916
emu-kernel-2, exec:74.17423748970032, overhead:1.6729366779327393
emu-kernel-3, exec:73.97267079353333, overhead:1.9235284328460693
emu-kernel-5, exec:73.99317622184753, overhead:1.8558013439178467
emu-kernel-7, exec:74.30304551124573, overhead:1.5494844913482666
emu-kernel-8, exec:74.33411979675293, overhead:1.3018989562988281
emu-kernel-10, exec:74.30155730247498, overhead:0.945380449295044
emu-kernel-11, exec:74.08601260185242, overhead:1.0297198295593262
emu-kernel-6, exec:74.11757159233093, overhead:2.040417194366455
emu-kernel-0, exec:74.94742369651794, overhead:1.8905093669891357
emu-kernel-1, exec:74.96954154968262, overhead:1.919313669204712
emu-kernel-15, exec:74.7119288444519, overhead:0.6134374141693115
emu-kernel-9, exec:75.13474869728088, overhead:0.9890854358673096
emu-kernel-13, exec:75.54988265037537, overhead:0.7308213710784912
dm-12, exec:78.79675269126892, overhead:0.5193510055541992
dm-4, exec:80.31357002258301, overhead:0.7869980335235596
dm-14, exec:79.35147762298584, overhead:0.6469364166259766
dm-3, exec:80.93920230865479, overhead:0.6376199722290039
dm-2, exec:80.74278140068054, overhead:1.0439777374267578
dm-6, exec:81.04182481765747, overhead:0.7910363674163818
dm-8, exec:80.99067568778992, overhead:0.6831600666046143
dm-5, exec:80.68410277366638, overhead:0.8911862373352051
dm-10, exec:80.74726366996765, overhead:0.6151833534240723
dm-11, exec:80.54002070426941, overhead:0.5191082954406738
dm-7, exec:81.25784039497375, overhead:0.8031702041625977
dm-0, exec:81.53011512756348, overhead:0.7900223731994629
dm-9, exec:81.00382399559021, overhead:0.8679463863372803
dm-15, exec:80.28223276138306, overhead:0.503267765045166
dm-1, exec:81.6960859298706, overhead:0.6865055561065674
dm-13, exec:80.81026768684387, overhead:0.3554697036743164
total_req_latency:82.54370713233948
per_req_latency:0.16508741426467896
```

### (16 physical cores, 8 way of LLC, 80% of memory bandwidth)
Command: 16 emulated kernels, using iterations = 4000    
`sudo rdtset -t 'mba=80;l3=0xff;cpu=0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30' -c 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30  python3 kernel_dm_pair.py 2 1`  

Output:  
```
emu-kernel-1, exec:97.12255620956421, overhead:0.17858266830444336
dm-1, exec:97.1856906414032, overhead:0.15641379356384277
emu-kernel-0, exec:101.70249533653259, overhead:0.1811981201171875
dm-0, exec:102.35873484611511, overhead:0.15967226028442383
total_req_latency:102.53247880935669
per_req_latency:0.025633119702339172
```

Command: 16 emulated kernels, using iterations = 2000
`sudo rdtset -t 'mba=80;l3=0xff;cpu=0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30' -c 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30  python3 kernel_dm_pair.py 16 1`

Output:  
```
emu-kernel-3, exec:309.2058982849121, overhead:1.0704944133758545
emu-kernel-2, exec:312.3534061908722, overhead:0.9348726272583008
emu-kernel-13, exec:314.0260007381439, overhead:0.3546030521392822
emu-kernel-12, exec:314.3967146873474, overhead:0.3955078125
emu-kernel-4, exec:315.3861367702484, overhead:1.0338506698608398
emu-kernel-8, exec:315.40386390686035, overhead:0.8006505966186523
emu-kernel-14, exec:315.93467926979065, overhead:0.3946819305419922
dm-3, exec:317.7159011363983, overhead:0.4348721504211426
emu-kernel-7, exec:318.7018942832947, overhead:0.9446156024932861
emu-kernel-15, exec:319.0646975040436, overhead:0.2843146324157715
dm-2, exec:320.11801195144653, overhead:0.4273979663848877
emu-kernel-10, exec:319.6601126194, overhead:0.5944671630859375
emu-kernel-6, exec:319.71107172966003, overhead:1.032895803451538
emu-kernel-11, exec:319.80753207206726, overhead:0.46921825408935547
emu-kernel-9, exec:320.226594209671, overhead:0.6571364402770996
dm-13, exec:320.9140188694, overhead:0.2312633991241455
emu-kernel-0, exec:320.9884994029999, overhead:0.906588077545166
dm-12, exec:321.16340136528015, overhead:0.26335883140563965
emu-kernel-5, exec:321.0222933292389, overhead:0.7493433952331543
emu-kernel-1, exec:321.4013032913208, overhead:0.9319112300872803
dm-4, exec:322.3017144203186, overhead:0.39099884033203125
dm-8, exec:322.1075038909912, overhead:0.5951454639434814
dm-14, exec:322.0245532989502, overhead:0.2871396541595459
dm-7, exec:323.93490982055664, overhead:0.455430269241333
dm-15, exec:323.5882499217987, overhead:0.19121170043945312
dm-10, exec:323.97725892066956, overhead:0.43930983543395996
dm-6, exec:324.2799255847931, overhead:0.5672414302825928
dm-11, exec:324.03410625457764, overhead:0.3031594753265381
dm-9, exec:324.35327672958374, overhead:0.391251802444458
dm-0, exec:324.69319796562195, overhead:0.532923698425293
dm-5, exec:324.6814126968384, overhead:0.5908002853393555
dm-1, exec:324.9707157611847, overhead:0.361499547958374
total_req_latency:325.3550329208374
per_req_latency:0.1616775164604187

```

## Benchmark 3: FFT -> Data motion
### (4 physical cores, 2 way of LLC, 20% of memory bandwidth)
Command: 2 emulated kernels, using iterations = 2000  
`sudo rdtset -t 'mba=20;l3=0x03;cpu=0,2,4,8' -c 0,2,4,8  python3 kernel_dm_pair.py reshape_casting 2 1`  

Output:  
```
emu-kernel-1, exec:111.54481172561646, overhead:0.5854175090789795
emu-kernel-0, exec:111.54744219779968, overhead:0.5878133773803711
dm-0, exec:114.45845746994019, overhead:0.488372802734375
dm-1, exec:114.38618588447571, overhead:0.5553381443023682
total_req_latency:114.96516704559326
per_req_latency:0.05748258352279663
57.483
```

Command: 16 emulated kernels, using iterations = 200 (2000 takes way too long)  
`sudo rdtset -t 'mba=20;l3=0x03;cpu=0,2,4,8' -c 0,2,4,8  python3 kernel_dm_pair.py reshape_casting 16 1`

Output:  
```
emu-kernel-0, exec:91.03020286560059, overhead:3.0045082569122314
emu-kernel-11, exec:88.87767577171326, overhead:2.3816466331481934
dm-11, exec:98.48174142837524, overhead:0.9152927398681641
dm-0, exec:101.26088523864746, overhead:0.7398645877838135
emu-kernel-8, exec:113.92832398414612, overhead:3.021606922149658
emu-kernel-2, exec:115.73171281814575, overhead:3.3651058673858643
emu-kernel-3, exec:121.9060537815094, overhead:3.31766676902771
dm-8, exec:122.42664217948914, overhead:1.4711501598358154
emu-kernel-6, exec:121.7952196598053, overhead:3.401657819747925
dm-2, exec:124.32114791870117, overhead:1.43454909324646
emu-kernel-14, exec:121.2110812664032, overhead:1.3094151020050049
emu-kernel-10, exec:126.32863664627075, overhead:2.541132926940918
emu-kernel-13, exec:126.71329736709595, overhead:1.7417302131652832
emu-kernel-1, exec:130.17795324325562, overhead:2.9692342281341553
emu-kernel-9, exec:128.41953659057617, overhead:2.881521701812744
emu-kernel-4, exec:129.81242322921753, overhead:3.633949041366577
emu-kernel-5, exec:129.91193842887878, overhead:3.401717185974121
emu-kernel-7, exec:129.74720883369446, overhead:3.1017379760742188
emu-kernel-12, exec:128.91216397285461, overhead:2.0567140579223633
emu-kernel-15, exec:129.36524653434753, overhead:1.0212125778198242
dm-3, exec:133.46586966514587, overhead:1.3950045108795166
dm-6, exec:132.90354752540588, overhead:1.7719013690948486
dm-14, exec:130.83173274993896, overhead:1.2549622058868408
dm-10, exec:133.99469470977783, overhead:1.3070006370544434
dm-13, exec:133.6438126564026, overhead:1.1708133220672607
dm-5, exec:138.6488480567932, overhead:1.5510668754577637
dm-1, exec:139.8926498889923, overhead:0.759850263595581
dm-4, exec:139.06359791755676, overhead:1.5030221939086914
dm-9, exec:137.328519821167, overhead:1.2269768714904785
dm-7, exec:138.37351846694946, overhead:1.234938621520996
dm-12, exec:136.78297519683838, overhead:1.378990888595581
dm-15, exec:136.3050718307495, overhead:0.8229389190673828
total_req_latency:141.13427925109863
per_req_latency:0.35283569812774657
```

### (8 physical cores, 4 way of LLC, 40% of memory bandwidth)
Command: 2 emulated kernels, using iterations = 4000 
`sudo rdtset -t 'mba=40;l3=0x0f;cpu=0,2,4,8,10,12,14,16' -c 0,2,4,8,10,12,14,16  python3 kernel_dm_pair.py 2 1`  

Output:  
```
emu-kernel-1, exec:57.60019898414612, overhead:0.2924530506134033
emu-kernel-0, exec:58.17378044128418, overhead:0.31509923934936523
dm-1, exec:59.015586614608765, overhead:0.27179908752441406
dm-0, exec:59.601850509643555, overhead:0.2748868465423584
total_req_latency:59.89042258262634
per_req_latency:29.94521129131317
per_req_latency:29.945
```


Command: 16 emulated kernels, using iterations = 400 (2000 takes way too long)  
`sudo rdtset -t 'mba=40;l3=0x0f;cpu=0,2,4,8,10,12,14,16' -c 0,2,4,8,10,12,14,16  python3 kernel_dm_pair.py 16 1`

Output:  
```
emu-kernel-1, exec:57.34511351585388, overhead:1.4295971393585205
emu-kernel-8, exec:57.14862942695618, overhead:1.058030605316162
emu-kernel-10, exec:57.41576647758484, overhead:0.742398738861084
emu-kernel-3, exec:57.745171308517456, overhead:1.560554027557373
emu-kernel-13, exec:57.510372161865234, overhead:0.682330846786499
emu-kernel-2, exec:58.28313374519348, overhead:1.2847521305084229
emu-kernel-4, exec:58.144585371017456, overhead:1.269648790359497
emu-kernel-6, exec:58.18789768218994, overhead:1.7100141048431396
emu-kernel-7, exec:58.28078842163086, overhead:1.4540300369262695
emu-kernel-14, exec:58.02410674095154, overhead:0.4942948818206787
emu-kernel-0, exec:58.58882451057434, overhead:1.5726566314697266
emu-kernel-11, exec:58.49199962615967, overhead:0.8378791809082031
emu-kernel-5, exec:58.7255654335022, overhead:1.5823006629943848
emu-kernel-9, exec:59.01183605194092, overhead:0.9904394149780273
emu-kernel-12, exec:59.278160095214844, overhead:0.8447577953338623
emu-kernel-15, exec:59.74491214752197, overhead:0.5775594711303711
dm-1, exec:64.49200367927551, overhead:0.6844427585601807
dm-8, exec:64.12058639526367, overhead:0.7681527137756348
dm-10, exec:63.750560998916626, overhead:0.6839907169342041
dm-3, exec:64.82851505279541, overhead:0.6512892246246338
dm-2, exec:64.98240447044373, overhead:0.6823780536651611
dm-13, exec:64.0021333694458, overhead:0.3988769054412842
dm-6, exec:64.93957805633545, overhead:0.7673330307006836
dm-11, exec:64.5116446018219, overhead:0.6911706924438477
dm-14, exec:64.31970691680908, overhead:0.34301257133483887
dm-7, exec:65.07957482337952, overhead:0.7754957675933838
dm-4, exec:65.47955441474915, overhead:0.6845049858093262
dm-0, exec:65.57494616508484, overhead:0.600252628326416
dm-5, exec:65.25306987762451, overhead:0.8992166519165039
dm-9, exec:65.15108275413513, overhead:0.4632282257080078
dm-12, exec:64.91298413276672, overhead:0.4551219940185547
dm-15, exec:64.51968312263489, overhead:0.3312509059906006
total_req_latency:66.56617546081543
per_req_latency:0.16641543865203856
```

### (16 physical cores, 8 way of LLC, 80% of memory bandwidth)
Command: 16 emulated kernels, using iterations = 4000    
`sudo rdtset -t 'mba=80;l3=0xff;cpu=0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30' -c 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30  python3 kernel_dm_pair.py 2 1`  

Output:  
```
emu-kernel-0, exec:105.12375235557556, overhead:0.20046305656433105
emu-kernel-1, exec:105.1499879360199, overhead:0.19762682914733887
dm-0, exec:106.27944803237915, overhead:0.17474913597106934
dm-1, exec:106.29882669448853, overhead:0.17559170722961426
total_req_latency:106.49171662330627
per_req_latency:0.026622929155826567
```

Command: 16 emulated kernels, using iterations = 2000
`sudo rdtset -t 'mba=80;l3=0xff;cpu=0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30' -c 0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30  python3 kernel_dm_pair.py 16 1`

Output:  


## Benchmark 1: Video Codec -> Data motion